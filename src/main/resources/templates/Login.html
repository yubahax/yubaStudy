<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录</title>
  <link rel="stylesheet" href="../static/css/Login.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.js"></script>
     <script src="../static/js/login.js"></script>
</head>
<body>
     <div id="app" class="container">
       <img src="../static/img/bg.jpg" alt="">
       <div class="panel">
          <div class="content login">
             <div class="switch">
                 <span :class='{"active":active == "login"}' @click="go('login')">登录</span>
                 <span>/</span>
                 <span :class='{"active":active == "register"}' @click="go('register')">注册</span>
             </div>
             <div class="form" id="fromLogin">
<!--             如果按钮选择的是注册则展示这个界面的内容-->
                 <template v-if="active === 'register'">
<!--                     <form action="/api/register" method="post">-->
                     <div class="input">
                         <input :class="{hasValue : registerFrom.email}" v-model="registerFrom.email" type="text" name="email" id="email">
                         <label for="email">邮箱</label>
                     </div>
                     <div class="input">
                         <input :class="{hasValue : registerFrom.Username}" v-model="registerFrom.Username" type="text" name="Username" id="Username">
                         <label for="email">用户名</label>
                     </div>
                     <div class="input">
                         <input :class="{hasValue : registerFrom.Password}" v-model="registerFrom.Password" type="text" name="Password" id="Password">
                         <label for="email">密码</label>
                     </div>
                     <div class="input">
                         <input :class="{hasValue : registerFrom.repeat}" v-model="registerFrom.repeat" type="text" name="Passwordrepeat" id="Passwordrepeat">
                         <label for="email">确认密码</label>
                     </div>
                     <button @click = "submit">注册</button>
<!--                     </form>-->
                 </template>
<!--                 如果按钮选择的是登录则展示这个界面的内容-->
                 <template v-if="active === 'login'">
                    <form action="/do" method="post">
                     <div class="input">
                         <input :class="{hasValue : loginFrom.Username}" v-model="loginFrom.Username" type="text" name="username" id="loginUsername">
                         <label for="email">用户名</label>
                     </div>
                     <div class="input">
                         <input :class="{hasValue : loginFrom.Password}" v-model="loginFrom.Password" type="text" name="password" id="loginPassword">
                         <label for="email">密码</label>
                     </div>
                     <button>登录</button>
                    </form>
                 </template>
                 <span>忘记密码?</span>

             </div>
         </div>
       </div>
     </div>
</body>
<script>
    new Vue({
    el: '#app',
    data: {
        active : 'login',
        registerFrom:{
            email :'',
            Username :'',
            Password :'',
            repeat :''
        },
        loginFrom:{
            Username :'',
            Password :''
        }
    },
    methods :{
        go(type){
            this.active = type
        },
        submit(){
            if(this.active === 'login'){
                axios({
                    //请求方式
                    method:'post',
                    //后端接口路径
                    url:'/do',
                    //注意这里使用的是params,该属性负责把属性名和属性值添加到url后面，一般和get配合使用，但也能    和post配合使用
                    params: {
                        //attributeName为属性名，value为属性值
                       name:this.loginFrom.Username,
                        password:this.loginFrom.Password
                    }
                }).then((response) => {
                    console.log(response.data.username)
                }).catch((error) => {
                    //对error进行处理
                });
            }
            if(this.active === 'register'){
                axios({
                    //请求方式
                    method:'post',
                    //后端接口路径
                    url:'/api/register',
                    //注意这里使用的是params,该属性负责把属性名和属性值添加到url后面，一般和get配合使用，但也能    和post配合使用
                    params: {
                        //attributeName为属性名，value为属性值
                        username:this.registerFrom.Username,
                        password:this.registerFrom.Password
                    }
                }).then((response) => {
                    if (response.data === false) {
                        alert("false")
                    } else {
                        this.active = 'login'
                    }
                }).catch((error) => {
                    //对error进行处理
                });
            }
        }
    }
})
</script>
</html>